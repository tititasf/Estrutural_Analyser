---
description: Protocolo de Governan√ßa, Harmoniza√ß√£o e Contextualiza√ß√£o de Mem√≥ria Tri-N√≠vel (Curto, M√©dio e Longo Prazo)
alwaysApply: true
---

# üß† Protocolo de Governan√ßa de Mem√≥ria AgenteCAD

Este protocolo define como o Agente deve interagir, atualizar e harmonizar os tr√™s n√≠veis de mem√≥ria do Sistema Operacional Cognitivo Antigravity.

## 1. Defini√ß√£o dos N√≠veis de Mem√≥ria

| N√≠vel | Escopo | Armazenamento | Prop√≥sito |
| :--- | :--- | :--- | :--- |
| **Curto Prazo** | Sess√£o/Tarefa | RAM / Estado do Agente | Contexto imediato, vari√°veis de execu√ß√£o, progresso da task atual. |
| **M√©dio Prazo** | Projeto (Local) | SQLite / ChromaDB | DNA do projeto, padr√µes espec√≠ficos de DXF, hist√≥rico de decis√µes locais. |
| **Longo Prazo** | Corporativo (Global) | ByteRover Cloud | Padr√µes universais, arquitetura base, solu√ß√µes complexas reutiliz√°veis. |

## 2. Protocolo de Contextualiza√ß√£o (Leitura)

**OBRIGAT√ìRIO** realizar o "Memory Recon" no in√≠cio de qualquer tarefa complexa:

1.  **Query Longo Prazo (ByteRover)**: Buscar padr√µes globais ou solu√ß√µes para o problema atual.
    -   *Ferramenta*: `mcp_byterover_retrieve_knowledge`
2.  **Query M√©dio Prazo (Local)**: Buscar o DNA e contexto do projeto atual.
    -   *Ferramenta*: Consultar arquivos `.json`, `chroma.sqlite3` ou logs de projeto.
3.  **Sintetizar Curto Prazo**: Consolidar os achados para definir o estado inicial da tarefa.

## 3. Protocolo de Atualiza√ß√£o (Escrita)

A cada checkpoint funcional (Task Done), o agente deve:

-   **Atualizar M√©dio Prazo**: Se o resultado for espec√≠fico do projeto (ex: "identificamos que este DXF usa a layer 'VIGAS_OLD'"), registrar localmente.
-   **Avaliar para Longo Prazo**: Se o resultado for uma solu√ß√£o arquitetural, um bug fix cr√≠tico ou um padr√£o inovador, disparar sincroniza√ß√£o Byterover.
    -   *Trigger*: Seguir `.cursor/rules/byterover-memory-sync.mdc`.

## 4. Protocolo de Harmoniza√ß√£o (Sincroniza√ß√£o entre N√≠veis)

A harmoniza√ß√£o ocorre para garantir que o conhecimento flua e n√£o se torne obsoleto:

### ‚¨ÜÔ∏è Promo√ß√£o (M√©dio -> Longo)
- **Crit√©rio**: Um padr√£o identificado em 3 ou mais projetos locais ou uma solu√ß√£o que resolve uma falha sist√™mica.
- **A√ß√£o**: Usar `mcp_byterover_store_knowledge` para promover o insight do M√©dio para o Longo prazo.

### ‚¨áÔ∏è Destila√ß√£o (Curto -> M√©dio)
- **Crit√©rio**: Informa√ß√µes de sess√£o que t√™m valor para o hist√≥rico do projeto (ex: par√¢metros de treinamento usados em um modelo local).
- **A√ß√£o**: Registrar no banco de dados local ou arquivos de metadados do projeto.

### üîÑ Alinhamento de Conflitos
- Se um conhecimento de **Longo Prazo** conflitar com o DNA do **M√©dio Prazo** (ex: Regra global diz 'Layer A', mas projeto usa 'Layer B'):
  1.  Respeitar o M√©dio Prazo para execu√ß√£o.
  2.  Documentar a exce√ß√£o na mem√≥ria de M√©dio Prazo.
  3.  Se a exce√ß√£o for frequente, sugerir atualiza√ß√£o da Regra Global (Longo Prazo).

## 5. Instru√ß√µes Procedimentais para o Agente

- **SEMPRE** que voc√™ "mexer" em mem√≥ria (criar um fato, atualizar um contexto), verifique se isso afeta os n√≠veis superiores ou inferiores.
- **PROATIVIDADE**: Se detectar que aprendeu algo novo no processo de c√≥digo, n√£o apenas termine a tarefa. **Curadoria √© parte da tarefa**.
- **MEM√ìRIA VETORIAL**: Sempre que realizar um `store`, certifique-se de que as tags e o contexto est√£o ricos o suficiente para recupera√ß√£o futura.

## 6. Verifica√ß√£o de Integridade

- **Unit Validation**: O registro foi persistido no n√≠vel correto?
- **Integration Check**: O conhecimento novo est√° acess√≠vel para a pr√≥xima query de contextualiza√ß√£o?
- **Fail-Safe**: Se a sincroniza√ß√£o cloud falhar, o registro deve ser mantido em M√©dio Prazo com flag `pending_sync`.
